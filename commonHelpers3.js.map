{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash.throttle';\n\nconst elements = {\n  form: document.querySelector('.feedback-form'),\n};\n\nfunction getFormData(form) {\n  const formData = new FormData(form);\n  const data = {};\n  formData.forEach((value, key) => {\n    data[key] = value;\n  });\n  return data;\n}\n\nelements.form.addEventListener(\n  'input',\n  throttle(evt => {\n    const form = evt.target.closest('.feedback-form');\n    // console.log(data);\n    localStorage.setItem(\n      'feedback-form-state',\n      JSON.stringify(getFormData(form))\n    );\n  }, 500)\n);\n\nelements.form.addEventListener('submit', evt => {\n  evt.preventDefault();\n  const form = evt.currentTarget;\n  const formData = getFormData(form);\n\n  if (!formData.email && !formData.message) {\n    return;\n  }\n  console.log(formData);\n  localStorage.removeItem('feedback-form-state');\n  form.reset();\n});\n\nconst savedState = JSON.parse(localStorage.getItem('feedback-form-state'));\nif (savedState) {\n  elements.form.elements.email.value = savedState.email;\n  elements.form.elements.message.value = savedState.message;\n}\n"],"names":["elements","getFormData","form","formData","data","value","key","throttle","evt","savedState"],"mappings":"wIAEA,MAAMA,EAAW,CACf,KAAM,SAAS,cAAc,gBAAgB,CAC/C,EAEA,SAASC,EAAYC,EAAM,CACzB,MAAMC,EAAW,IAAI,SAASD,CAAI,EAC5BE,EAAO,CAAA,EACb,OAAAD,EAAS,QAAQ,CAACE,EAAOC,IAAQ,CAC/BF,EAAKE,GAAOD,CAChB,CAAG,EACMD,CACT,CAEAJ,EAAS,KAAK,iBACZ,QACAO,EAASC,GAAO,CACd,MAAMN,EAAOM,EAAI,OAAO,QAAQ,gBAAgB,EAEhD,aAAa,QACX,sBACA,KAAK,UAAUP,EAAYC,CAAI,CAAC,CACtC,CACG,EAAE,GAAG,CACR,EAEAF,EAAS,KAAK,iBAAiB,SAAUQ,GAAO,CAC9CA,EAAI,eAAc,EAClB,MAAMN,EAAOM,EAAI,cACXL,EAAWF,EAAYC,CAAI,EAE7B,CAACC,EAAS,OAAS,CAACA,EAAS,UAGjC,QAAQ,IAAIA,CAAQ,EACpB,aAAa,WAAW,qBAAqB,EAC7CD,EAAK,MAAK,EACZ,CAAC,EAED,MAAMO,EAAa,KAAK,MAAM,aAAa,QAAQ,qBAAqB,CAAC,EACrEA,IACFT,EAAS,KAAK,SAAS,MAAM,MAAQS,EAAW,MAChDT,EAAS,KAAK,SAAS,QAAQ,MAAQS,EAAW"}